{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}写博客{% endblock %}

{% block head %}
	{{ super() }}
	<script type="text/javascript" src="{{ url_for('static', filename='ckeditor-dev/ckeditor.js') }}"></script>
{% endblock %}

{% block page_content %}
	<div class="container">
		<!-- 博客提交表单 -->
		<!-- 检测当前用户是否有写权限 -->
		{% if current_user.can(Permission.WRITE_ARTICLES) %}
		<div class="row">
			<div>
				{{ wtf.quick_form(form) }}
			</div>
		</div>
		{% endif %}
	</div>
{% endblock %}


{% block scripts %}
{{ super() }}
<script>
	/*文档就绪事件*/
	$(document).ready(function(){
	var editorContent = CKEDITOR.replace('ckhtml',{
		skin: 'kama',//kama moono
		toolbarLocation: 'top',//top bottom
		toolbarCanCollapse: true,
		language: 'zh-cn',
		allowedContent: true,
		removePlugins:  'elementspath',//移除元素路径
		resize_enabled: true, //是否可拖拽
		enterMode: CKEDITOR.ENTER_BR,// 配置Enter是换行
		shiftEnterMode: CKEDITOR.ENTER_P, // 配置Shift + Enter是换段落
		filebrowserUploadUrl: '/ckupload/', //文件上传路径
		extraPlugins: 'preview,colorbutton,font,find,save',//预览
		font_names:  '宋体/宋体;黑体/黑体;仿宋/仿宋_GB2312;楷体/楷体_GB2312;隶书/隶书;>    幼圆/幼圆;微软雅黑/微软雅黑;',
		find_highlight: {
			element : 'span',
			styles : { 'background-color' : '#ff0', 'color' : '#00f' }
		},
	});
	});
</script>
{% endblock %}


